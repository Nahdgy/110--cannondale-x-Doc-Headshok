<style>
    .forks-maintenance h3{
        font-family:Helvetica;
      font-size: 35px;
      font-weight: 700;
      color: black;
      margin: 0px
    }
    
     .forks-maintenance h4{
        font-family:DIN Next LT Pro;
      font-size: 16px;
      font-weight: 700;
      color: black;
      margin: 0px
    }
    
    .forks-maintenances p{
    font-family:DIN Next LT Pro;
      font-size: 16px;
      font-weight: 300;
      color: black;
      margin: 0px
    }
</style>


<div class="forks-maintenance">
    <h4 id="toggle-menu" style="cursor:pointer;">
         Dévoilage roue 
    </h4>
    <div id="menu-content" style="display:none; margin-top:10px;">
        <p>Le dévoilage de roue consiste à ajuster la tension des rayons pour corriger les voiles et garantir une rotation parfaite. Cette opération améliore la sécurité et la longévité de votre roue.</p>
        <ul style="font-family:DIN Next LT Pro; font-size:15px; color:#333; margin:0; padding-left:18px;">
            <li>Contrôle du voile et du saut</li>
            <li>Réglage de la tension des rayons</li>
            <li>Vérification de l’état général de la roue</li>
        </ul>
        <button id="open-modal" style="margin-top:20px; background:#FF3F22; color:#fff; border:none; padding:10px 18px; border-radius:6px; font-size:16px; cursor:pointer;">Envoyer une demande
        </button>
    </div>
</div>


<div id="modal-form" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:9999; justify-content:center; align-items:center;">
  <div style="background:#fff; padding:30px 24px; border-radius:12px; max-width:400px; width:90vw; position:relative;">
    <button id="close-modal" style="position:absolute; top:10px; right:10px; background:none; border:none; font-size:22px; cursor:pointer;">&times;</button>
    <h3 style="font-family:Helvetica; font-size:22px; margin-bottom:18px;">Formulaire de demande</h3>
    <form id="demande-form" enctype="multipart/form-data">
      <label for="remarque" style="font-family:DIN Next LT Pro; font-size:16px;">Remarque :</label><br>
      <textarea id="remarque" name="remarque" rows="4" style="width:100%; margin-bottom:14px; font-size:15px;"></textarea><br>
      <label for="piece-jointe" style="font-family:DIN Next LT Pro; font-size:16px;">Ajouter une pièce jointe :</label><br>
      <input type="file" id="piece-jointe" name="piece_jointe" multiple style="margin-bottom:14px;"><br>
      <button type="submit" style="background:#FF3F22; color:#fff; border:none; padding:8px 16px; border-radius:6px; font-size:16px; cursor:pointer;">Envoyer</button>
    </form>
    <div id="form-message" style="margin-top:10px; color:green; font-size:15px;"></div>
  </div>
</div>
<script>
document.getElementById('toggle-menu').addEventListener('click', function() {
    var content = document.getElementById('menu-content');
    content.style.display = (content.style.display === 'none' || content.style.display === '') ? 'block' : 'none';
});
document.getElementById('open-modal').onclick = function() {
  document.getElementById('modal-form').style.display = 'flex';
};
document.getElementById('close-modal').onclick = function() {
  document.getElementById('modal-form').style.display = 'none';
};
document.getElementById('demande-form').onsubmit = function(e) {
  e.preventDefault();
  var formData = new FormData(this);
  var xhr = new XMLHttpRequest();
  xhr.open('POST', '/wp-admin/admin-ajax.php?action=envoyer_demande_remarque', true);
  xhr.onload = function() {
    if (xhr.status === 200) {
      document.getElementById('form-message').textContent = 'Demande envoyée avec succès !';
      document.getElementById('demande-form').reset();
    } else {
      document.getElementById('form-message').textContent = 'Erreur lors de l’envoi.';
    }
  };
  xhr.send(formData);
};
</script>