function header_personnalise_shortcode() {
  ob_start();
  ?>
	<script src="https://www.google.com/recaptcha/api.js?render=6LcP-tQrAAAAAAtI4Hwc5OdpwrnB7T9BCO_YsG1Y"></script>
	<script>
	document.addEventListener('DOMContentLoaded', function() {
		var boutonPanier = document.getElementById('ouvrir-panier');
		var drawer = document.getElementById('drawer-panier');
		var fermerDrawer = document.getElementById('fermer-drawer');
		var overlay = document.getElementById('drawer-overlay');
		function ouvrirDrawer() {
			drawer.classList.add('ouvert');
			overlay.classList.add('ouvert');
		}
		function fermerDrawerFn() {
			drawer.classList.remove('ouvert');
			overlay.classList.remove('ouvert');
		}
		if(boutonPanier && drawer && fermerDrawer && overlay) {
			boutonPanier.addEventListener('click', function(e) {
				// Ouvre le drawer uniquement si le lien n'est pas déjà sur la page panier
				if (window.location.pathname !== '/panier/') {
					e.preventDefault();
					ouvrirDrawer();
				}
			});
			fermerDrawer.addEventListener('click', function() {
				fermerDrawerFn();
			});
			overlay.addEventListener('click', function() {
				fermerDrawerFn();
			});
		}
		// MENU BURGER MOBILE
		const burgerDown = document.getElementById('burger-down');
		const burgerClose = document.getElementById('burger-close');
		const headerMenu = document.getElementById('header-menu');
		// Ouvre le menu burger
		if (burgerDown && headerMenu && burgerClose) {
			burgerDown.addEventListener('click', function() {
				burgerClose.classList.remove('hide');
				burgerDown.classList.add('hide');
				headerMenu.style.display = 'block';
			});
		}
		// Ferme le menu burger
		if (burgerClose && headerMenu && burgerDown) {
			burgerClose.addEventListener('click', function() {
				burgerDown.classList.remove('hide');
				burgerClose.classList.add('hide');
				headerMenu.style.display = 'none';
				const flags = document.getElementById('flags');
				if (flags) flags.style.zIndex = '1';
				// Réactiver le scroll de la page quand on ferme le menu
				document.body.style.overflow = '';
			});
		}

		// Gestion des sous-dropdowns Boutique au clic sur la flèche OU sur le lien
		let currentSubMenu = null;
		document.querySelectorAll('.dropdown-sub').forEach(function(sub) {
			const submenu = sub.querySelector('.dropdown-content-sub');
			const arrow = sub.querySelector('.arrow-orange');
			const link = sub.querySelector('a');
			
			// Fonction pour toggler le sous-menu
			function toggleSubMenu(e) {
				e.preventDefault();
				e.stopPropagation();
				
				// Ferme le sous-menu actuellement ouvert s'il est différent
				if (currentSubMenu && currentSubMenu !== submenu) {
					currentSubMenu.style.display = 'none';
				}
				
				// Toggle du sous-menu cliqué
				if (submenu.style.display === 'grid') {
					submenu.style.display = 'none';
					currentSubMenu = null;
					// Réactiver le scroll de la page
					if (window.innerWidth <= 1129) {
						document.body.style.overflow = '';
					}
				} else {
					submenu.style.display = 'grid';
					currentSubMenu = submenu;
					
					// Désactiver le scroll de la page en mode mobile quand un sous-menu s'ouvre
					if (window.innerWidth <= 1129) {
						document.body.style.overflow = 'hidden';
					}
					
					// Ajustement de position en mode mobile pour éviter les débordements
					if (window.innerWidth <= 1129) {
						const rect = sub.getBoundingClientRect();
						const menuHeight = submenu.offsetHeight || 300;
						const viewportHeight = window.innerHeight;
						
						// Si le sous-menu dépasse en bas, le positionner vers le haut
						if (rect.bottom + menuHeight > viewportHeight) {
							submenu.style.top = 'auto';
							submenu.style.bottom = '100%';
							submenu.style.marginTop = '0';
							submenu.style.marginBottom = '5px';
						} else {
							submenu.style.top = '100%';
							submenu.style.bottom = 'auto';
							submenu.style.marginTop = '5px';
							submenu.style.marginBottom = '0';
						}
					}
				}
			}
			
			// Appliquer le comportement au lien si un sous-menu existe
			if (submenu && link) {
				link.addEventListener('click', toggleSubMenu);
			}
			
			// Appliquer également à la flèche si elle existe
			if (arrow) {
				arrow.addEventListener('click', toggleSubMenu);
			}
			
			// Empêche la propagation du clic sur le sous-menu pour éviter sa fermeture
			if (submenu) {
				submenu.addEventListener('click', function(e) {
					e.stopPropagation();
				});
			}
		});
		
		// Ferme tous les sous-menus si on clique ailleurs
		document.addEventListener('click', function() {
			if (currentSubMenu) {
				currentSubMenu.style.display = 'none';
				currentSubMenu = null;
				// Réactiver le scroll de la page
				if (window.innerWidth <= 1129) {
					document.body.style.overflow = '';
				}
			}
		});
		
		// Gestion du redimensionnement de l'écran
		window.addEventListener('resize', function() {
			// Si on passe en mode desktop, réactiver le scroll
			if (window.innerWidth > 1129) {
				document.body.style.overflow = '';
				// Fermer tous les sous-menus ouverts
				if (currentSubMenu) {
					currentSubMenu.style.display = 'none';
					currentSubMenu = null;
				}
			}
		});
		
		// Gestion des flèches principales (BOUTIQUE et ATELIER) en mode mobile
		let currentMainMenu = null;
		document.querySelectorAll('.dropdown > .arrow-orange').forEach(function(arrow) {
			const dropdown = arrow.closest('.dropdown');
			const menuContent = dropdown.querySelector('.dropdown-content');
			
			if (arrow && menuContent) {
				arrow.addEventListener('click', function(e) {
					e.preventDefault();
					e.stopPropagation();
					
					// Mode mobile uniquement
					if (window.innerWidth <= 1129) {
						// Ferme le menu actuellement ouvert s'il est différent
						if (currentMainMenu && currentMainMenu !== menuContent) {
							currentMainMenu.style.display = 'none';
						}
						
						// Toggle du menu cliqué
						if (menuContent.style.display === 'block') {
							menuContent.style.display = 'none';
							currentMainMenu = null;
						} else {
							menuContent.style.display = 'block';
							currentMainMenu = menuContent;
						}
					}
				});
			}
		});
		
		// Timeout hover menu déroulant pour TOUS les dropdowns (desktop uniquement)
		document.querySelectorAll('.dropdown').forEach(function(dropdown) {
			var menuContent = dropdown.querySelector('.dropdown-content');
			let timerShowParent, timerHideParent;
			
			if (menuContent) {
				dropdown.addEventListener('mouseenter', function() {
					// Hover uniquement en mode desktop
					if (window.innerWidth > 1129) {
						clearTimeout(timerHideParent);
						timerShowParent = setTimeout(function() {
							menuContent.style.display = 'block';
						}, 500);
					}
				});
				
				dropdown.addEventListener('mouseleave', function() {
					if (window.innerWidth > 1129) {
						clearTimeout(timerShowParent);
						timerHideParent = setTimeout(function() {
							menuContent.style.display = 'none';
						}, 500);
					}
				});
			}
		});
	});

	document.addEventListener('DOMContentLoaded', () => {
		const carousel = document.getElementById('carousel');
		const items = carousel.querySelectorAll('.carousel-item');
		let activeIndex = 0;
		function setActive(index) {
			items.forEach((item, i) => {
				item.classList.toggle('carousel-item-active', i === index);
			});
			// Centrage de l'élément actif
			const item = items[index];
			if (item) {
				const carouselRect = carousel.getBoundingClientRect();
				const itemRect = item.getBoundingClientRect();
				const offset = itemRect.left - carouselRect.left - (carouselRect.width/2 - itemRect.width/2);
				carousel.scrollBy({ left: offset, behavior: 'smooth' });
			}
		}
		setActive(activeIndex);
		document.getElementById('prevBtn')?.addEventListener('click', () => {
			activeIndex = Math.max(0, activeIndex - 1);
			setActive(activeIndex);
		});
		document.getElementById('nextBtn')?.addEventListener('click', () => {
			activeIndex = Math.min(items.length - 1, activeIndex + 1);
			setActive(activeIndex);
		});
		// Optionnel : clic sur un item pour le centrer
		items.forEach((item, i) => {
			item.addEventListener('click', () => {
				activeIndex = i;
				setActive(activeIndex);
			});
		});
	});

	// JS pour le compteur de quantité
	document.addEventListener('DOMContentLoaded', function() {
		document.querySelectorAll('.qty-btn').forEach(function(btn) {
			btn.addEventListener('click', function() {
				var productId = btn.getAttribute('data-product');
				var input = document.getElementById('qty-' + productId);
				var action = btn.getAttribute('data-action');
				var current = parseInt(input.value) || 1;
				if (action === 'increment') {
					input.value = current + 1;
				} else if (action === 'decrement' && current > 1) {
					input.value = current - 1;
				}
			});
		});
	});
	// Ajout AJAX au panier
	function ajouterAuPanier(productId, qty) {
		jQuery.ajax({
			url: wc_add_to_cart_params.ajax_url,
			type: 'POST',
			data: {
				action: 'woocommerce_add_to_cart',
				product_id: productId,
				quantity: qty
			},
			success: function(response) {
				// Optionnel : mettre à jour le compteur ou le drawer
				location.reload();
			},
			error: function() {
				alert('Erreur lors de l’ajout au panier');
			}
		});
	}

	// Mise à jour AJAX de la quantité dans le panier
	function modifierQuantitePanier(productId, qty) {
		jQuery.ajax({
			url: wc_add_to_cart_params.ajax_url,
			type: 'POST',
			data: {
				action: 'update_cart_quantity',
				product_id: productId,
				quantity: qty
			},
			success: function(response) {
				location.reload();
			},
			error: function() {
				alert('Erreur lors de la mise à jour du panier');
			}
		});
	}

	function updatePanierCount() {
		jQuery.post(wc_add_to_cart_params.ajax_url, { action: 'get_mini_panier' }, function(response) {
			if (response && response.items) {
			var total = 0;
			response.items.forEach(function(item){ total += item.qty; });
			var badge = document.getElementById('panier-count');
			if (badge) badge.textContent = total;
			}
		});
		}
		document.addEventListener('DOMContentLoaded', function() {
		updatePanierCount();
		// Optionnel : rafraîchir à chaque action panier
		document.body.addEventListener('panierUpdated', updatePanierCount);
		});
		// Pour déclencher la mise à jour du badge après une action AJAX sur le panier
		window.panierUpdated = function() {
		var event = new Event('panierUpdated');
		document.body.dispatchEvent(event);
		}

	</script>
	<script src="https://www.google.com/recaptcha/api.js" async defer></script>

	<style>
		/* ===========================
		   VARIABLES CSS
		   =========================== */
		:root {
			--no-of-slides: 1;
			--slides-in-view: 1;
			--slide-width: 187vw;
			--iteration-time: 60s;
		}

		/* ===========================
		   ÉLÉMENTS GÉNÉRAUX
		   =========================== */
		.elementor-element.elementor-absolute,
		.elementor-element.elementor-fixed {
			z-index: 999;
		}

		.elementor-shortcode .trp-ls-shortcode-current-language,
		.elementor-shortcode .trp-ls-shortcode-language {
			border: none;
			z-index: 1;
		}

		.hide {
			display: none;
		}

		/* ===========================
		   HEADER
		   =========================== */
		.header-custom {
			position: fixed;
			width: 100vw;
			display: flex;
			flex-direction: column;
		}

		.header-middle {
			background: white;
			width: 100%;
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 20px 20px;
			flex-wrap: nowrap;
			border-bottom: 1px solid #000000;
		}

		/* ===========================
		   CAROUSEL
		   =========================== */
		.carousel {
			overflow: hidden;
			width: calc(2 * var(--no-of-slides));
		}

		.carousel__wrapper {
			display: flex;
			align-items: center;
			background-color: #ff3f21;
			color: white;
			font-family: helvetica;
			font-weight: 700;
			font-size: 16px;
			margin: 0 auto;
			padding: .5rem 2rem;
			width: calc(var(--slides-in-view) * var(--slide-width));
			overflow: hidden;
			border: 1px dashed gray;
			height: 40px;
		}

		.carousel__wrapper p {
			margin: 0;
			padding: 0;
		}

		.carousel__slide {
			animation: scroll var(--iteration-time) linear infinite;
			display: flex;
			flex-direction: row;
			flex: 0 0 auto;
			width: var(--slide-width);
			box-sizing: border-box;
			gap: 14rem;
			padding-left: 100vw;
		}

		.carousel__slide p {
			white-space: nowrap;
		}

		.carousel-item-active {
			box-shadow: 0 0 0 3px #FF3F22;
			border-radius: 10px;
			transition: box-shadow 0.2s;
			z-index: 2;
		}

		/* ===========================
		   RECHERCHE
		   =========================== */
		.search-desktop {
			flex: 0;
			align-items: center;
			justify-content: flex-start;
			height: 2rem;
		}

		.search-mobile {
			display: none;
		}

		.search-form {
			display: flex;
			align-items: center;
			position: relative;
			max-width: 20rem;
			min-width: 170px;
			width: 20vw;
			overflow: hidden;
			background-color: #fff;
		}

		.search-form input[type="search"] {
			width: 100%;
			height: 100%;
			padding: 10px 40px 10px 20px;
			background: url('https://doc-headshok.com/wp-content/uploads/2025/06/chercher.png') no-repeat right 10px center;
			background-size: 16px 16px;
			border: 1px solid black;
			border-radius: 30px;
			box-sizing: border-box;
		}

		.search-form button {
			display: none;
		}

		.search-form input::placeholder {
			color: black;
			opacity: 1;
		}

		/* ===========================
		   LOGOS
		   =========================== */
		.logos {
			flex: 2;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 15px;
			margin: 0 2vw;
			max-width: 1080px;
		}

		.logos img {
			height: 30px;
		}

		#headshok {
			height: 45px;
		}

		/* ===========================
		   ACTIONS HEADER
		   =========================== */
		.actions-header {
			display: flex;
			align-items: center;
			gap: 10%;
			height: 2rem;
		}

		.actions-header a {
			display: flex;
			align-items: flex-end;
		}

		.burger-icon {
			height: 25px;
			width: 40px;
			display: flex;
			flex-direction: column;
			justify-content: space-between;
			z-index: 99;
			margin-left: .5rem;
		}

		.burger-slice {
			background-color: black;
			height: 4px;
			border-radius: 1px;
		}

		/* ===========================
		   MENU PRINCIPAL
		   =========================== */
		.header-menu {
			background: transparent;
			display: flex;
			justify-content: center;
			padding: 0 20px;
		}

		.conteneur-reduit {
			background-color: white;
			max-width: 1450px;
			padding: 1rem;
			border-radius: 0 0 20px 20px;
			border: 1px solid black;
			border-top: none;
		}

		.header-menu nav a {
			margin-right: 15px;
			text-decoration: none;
			color: #000 !important;
			font-family: 'DIN Next LT Pro', sans-serif;
			font-size: 16px;
			font-weight: 300;
			margin: 0.5rem 1rem;
			border-radius: 5px;
			transition: background-color 0.3s ease;
			height: 100%;
		}

		.header-menu nav a:hover {
			background-color: #E9E9E9;
			font-weight: 700;
		}

		/* ===========================
		   TRADUCTION
		   =========================== */
		.trp-language-switcher {
			width: 2rem;
			max-height: 20px;
		}

		.trp-language-switcher > div > a > img {
			width: 25px;
			height: 25px;
			border-radius: 20px;
		}

		.trp-language-switcher > div {
			background-image: none;
			padding: 0px;
		}

		.trp-language-switcher > div > a {
			padding: 0px;
		}

		trp-ls-shortcode-current-language {
			width: 20px;
		}

		/* ===========================
		   DROPDOWNS
		   =========================== */
		.dropdown {
			margin: 0.5rem 0rem;
			position: relative;
		}

		.dropdown a {
			margin: 0;
		}

		.dropdown:hover .dropdown-content {
			display: block;
		}

		.dropdown-content {
			display: none;
			position: absolute;
			background-color: #f9f9f9;
			min-width: 160px;
			box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
			padding: 12px 16px;
			z-index: 1000000;
			list-style-type: none;
			border-radius: 20px;
			border: 1px solid black;
			overflow: visible;
		}

		.dropdown-content li a {
			font-size: 12px;
		}

		.dropdown-sub {
			position: relative;
			display: flex;
			align-items: center;
		}

		.dropdown-sub > a {
			padding-right: 18px;
			white-space: nowrap;
		}

		.dropdown-content-sub {
			display: none;
			position: absolute;
			left: 100%;
			top: 0;
			min-width: 600px;
			max-height: 400px;
			overflow-y: auto;
			background: #f9f9f9;
			box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.15);
			padding: 12px 15px;
			z-index: 2;
			border-radius: 20px;
			list-style-type: none;
			transition: opacity 0.2s;
			word-break: break-word;
			white-space: normal;
			grid-template-columns: repeat(3, 1fr);
		}

		.dropdown-content-sub li {
			margin: 0;
		}

		.dropdown-content-sub a {
			color: #222 !important;
			font-size: 14px;
			text-decoration: none;
			margin: 0px !important;
			padding: 0px !important;
			border-radius: 4px;
			display: block;
			transition: background 0.2s;
			width: fit-content;
		}

		.dropdown-content-sub a:hover {
			background: #ececec;
			color: #FF3F22 !important;
		}

		/* Scrollbar sous-menus */
		.dropdown-content-sub::-webkit-scrollbar {
			width: 10px;
		}

		.dropdown-content-sub::-webkit-scrollbar-track {
			background: transparent;
			margin: 8px 0;
		}

		.dropdown-content-sub::-webkit-scrollbar-thumb {
			background: #FF3F22;
			border-radius: 10px;
			border: 2px solid transparent;
			background-clip: content-box;
		}

		.dropdown-content-sub::-webkit-scrollbar-thumb:hover {
			background: #e6381e;
			background-clip: content-box;
		}

		/* Styles spécifiques header-menu */
		.header-menu .dropdown-sub {
			position: static;
		}

		.header-menu .dropdown-content {
			overflow: visible;
		}

		.header-menu .dropdown-content-sub {
			position: absolute;
			left: 100%;
			top: 0;
			min-width: 1080px;
			max-height: 400px;
			z-index: 100;
			border: solid, 1px, black;
		}

		.header-menu .dropdown-content-sub a {
			font-size: 12px;
		}

		/* ===========================
		   FLÈCHES MENU
		   =========================== */
		.arrow-orange {
			display: inline-block;
			margin-left: 8px;
			vertical-align: middle;
			width: 100%;
			height: 18px;
			background: none;
			position: relative;
			cursor: pointer;
			transition: transform 0.2s ease;
		}

		.arrow-orange:hover {
			transform: scale(1.1);
		}

		.arrow-orange::after {
			content: '';
			display: block;
			width: 0;
			height: 0;
			border-top: 9px solid transparent;
			border-bottom: 9px solid transparent;
			border-left: 12px solid #FF3F22;
			position: absolute;
			right: 0;
			top: 0;
		}

		/* ===========================
		   BOUTON PRESTATAIRE
		   =========================== */
		.btn-prestataire {
			background-color: #FFFFFF;
			color: #FF3F22 !important;
			padding: 6px 12px;
			border: 1px solid #FF3F22;
			border-radius: 10px;
			text-decoration: none;
			font-family: 'DIN Next LT Pro', sans-serif;
			font-size: 16px;
			font-weight: 700;
			min-width: 5rem;
			transition: all 0.3s ease;
		}

		.btn-prestataire:hover {
			background-color: #FF3F22;
			color: white !important;
		}

		/* ===========================
		   DRAWER PANIER
		   =========================== */
		.drawer-overlay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100vw;
			height: 100vh;
			background: rgba(0,0,0,0.4);
			z-index: 9998;
			opacity: 0;
			pointer-events: none;
			transition: opacity 0.3s ease;
		}

		.drawer-overlay.ouvert {
			opacity: 1;
			pointer-events: auto;
		}

		.drawer-panier {
			position: fixed;
			top: 0;
			right: 0;
			height: 100vh;
			width: 501px;
			max-width: 90vw;
			background: #fff;
			box-shadow: -2px 0 10px rgba(0,0,0,0.2);
			z-index: 9999;
			transform: translateX(100%);
			transition: transform 0.3s cubic-bezier(.4,0,.2,1);
			display: flex;
			flex-direction: column;
		}

		.drawer-panier.ouvert {
			transform: translateX(0);
		}

		.drawer-header {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 1rem;
			border-bottom: 1px solid #eee;
		}

		.fermer-drawer {
			background: none;
			border: none;
			font-size: 2rem;
			cursor: pointer;
			color: #000;
		}

		.fermer-drawer:hover {
			background-color: #FF3F22;
		}

		.drawer-content {
			display: flex;
			flex-direction: column;
			flex-wrap: nowrap;
			padding: 1rem;
			flex: 1;
			overflow-y: auto;
		}

		/* ===========================
		   FIL D'ARIANE
		   =========================== */
		.fil-ariane {
			margin: 1rem 0;
			font-family: 'din-next-lt-pro', sans-serif;
			font-size: 16px;
		}

		.fil-ariane ul {
			list-style: none;
			padding: 0;
			margin: 0;
			display: flex;
			flex-wrap: wrap;
			gap: 8px;
		}

		.fil-ariane li {
			display: flex;
			align-items: center;
		}

		.fil-ariane a {
			color: #FF3F22;
			text-decoration: none;
			font-weight: 700;
			transition: color 0.2s;
		}

		.fil-ariane a:hover {
			color: #222;
			text-decoration: underline;
		}

		.fil-ariane span {
			margin: 0 6px;
			color: #FF3F22;
			font-size: 18px;
			font-weight: bold;
		}

		/* ===========================
		   PANIER
		   =========================== */
		.go-to-cart {
			display: flex;
			width: 100%;
			justify-content: center;
		}

		.cart-link {
			background-color: #000;
			border-radius: 10px;
			color: #fff !important;
			padding: 14px;
			font-size: 24px;
			font-weight: 600;
			justify-content: center;
			margin-top: 5%;
		}

		.cart-link:hover {
			background-color: #FF3F22;
		}

		/* ===========================
		   MEDIA QUERIES
		   =========================== */
		@media screen and (max-width: 530px) {
			.header-middle {
				display: grid;
				grid-template-columns: 2fr auto;
			}

			.actions-header {
				margin-top: 1rem;
			}

			.logos {
				width: 100%;
				max-width: 100%;
			}

			.logos img {
				height: 45px;
			}
		}

		@media screen and (min-width: 1130px) {
			.burger-icon {
				display: none;
			}

			.logos-mobile {
				display: none;
			}

			.conteneur-reduit {
				width: 90vw;
				display: flex;
				flex-direction: row;
				justify-content: space-between;
				align-items: center;
				position: relative;
			}

			.menu-navbar nav {
				display: flex;
				flex-direction: row;
			}

			#burger-close {
				display: none;
			}

			.dropdown {
				position: static;
			}

			.dropdown-content {
				top: 100%;
				left: 0;
				margin-top: 0.5vh;
			}

			.dropdown > .arrow-orange {
				display: none;
			}
		}

		@media screen and (max-width: 1129px) {
			.header-menu {
				display: none;
			}

			.search-desktop {
				display: none;
			}

			.search-mobile {
				display: flex;
			}

			.logos-en-ligne {
				display: none;
			}

			.conteneur-reduit {
				display: flex;
				flex-direction: column;
				align-items: center;
				width: 20rem;
				max-height: 80vh;
				overflow-y: auto;
			}

			.cross {
				width: 100%;
				display: flex;
				justify-content: flex-end;
			}

			.menu-navbar {
				display: flex;
				flex-direction: column;
				align-items: flex-start;
				width: 100%;
				margin-bottom: 10px;
			}

			.menu-navbar nav {
				display: flex;
				flex-direction: column;
			}

			.translator {
				margin-bottom: 1rem;
			}

			.dropdown-content {
				top: 100%;
				left: 0;
				margin-top: 5px;
			}

			.dropdown-sub {
				position: relative;
			}

			.dropdown-content-sub {
				position: absolute;
				left: 0;
				top: 100%;
				width: calc(100vw - 60px);
				max-width: 400px;
				max-height: 300px;
				border-radius: 8px;
				margin-top: 5px;
				margin-left: 0;
				box-shadow: 0px 4px 8px 0px rgba(0,0,0,0.15);
				background: #f9f9f9;
				grid-template-columns: repeat(2, 1fr);
			}

			.header-menu .dropdown-content-sub {
				position: absolute;
				left: 0;
				top: 100%;
				min-width: auto;
				width: calc(100vw - 60px);
				max-width: 400px;
				max-height: 300px;
				border-radius: 8px;
				margin-top: 5px;
				margin-left: 0;
				box-shadow: 0px 4px 8px 0px rgba(0,0,0,0.15);
				grid-template-columns: repeat(2, 1fr);
			}

			.header-menu .dropdown-sub {
				position: relative;
			}

			.arrow-orange::after {
				border-left: 9px solid transparent;
				border-right: 9px solid transparent;
				border-top: 12px solid #FF3F22;
				border-bottom: none;
				right: 0;
				transform: none;
			}

			.fil-ariane {
				margin-top: 20%;
			}
		}

		/* ===========================
		   ANIMATIONS
		   =========================== */
		@keyframes scroll {
			0% {
				transform: translateX(0);
			}
			100% {
				transform: translateX(calc(var(--slide-width) * var(--no-of-slides) * -1));
			}
		}
	</style>

  <div class="header-custom">
		<section class="carousel">
		  <div class="container-fluid px-0">
			<div class="row">
			  <div class="col-12">
				<div class="carousel__wrapper">
				  <div class="carousel__slide">
					<p>Vente de pièces de vélo Cannondale</p>
					<p>Prestations fourches / amortisseurs par correspondance</p>
					<p>Atelier de réparation de vélos à Hyères (83) sur rendez-vous</p>
				  </div>
				</div>
			  </div>
			</div>
		  </div>
		</section>
	  
	  <div class="header-middle">
				<div class="search-desktop">
					<?php echo do_shortcode('[wpdreams_ajaxsearchlite]'); ?>
				</div>
		<a href="https://doc-headshok.com/">
			<div class="logos">
					<img src='https://doc-headshok.com/wp-content/uploads/2025/07/Logos-mobiles.png' class="logos-mobile">
					<img src='https://doc-headshok.com/wp-content/uploads/2025/08/Logo_110.png' class="logos-en-ligne">
					<img src='https://doc-headshok.com/wp-content/uploads/2025/08/Logo_headshok.png' class="logos-en-ligne" id="headshok">
					<img src='https://doc-headshok.com/wp-content/uploads/2025/08/Logo_canyon2.png' class="logos-en-ligne">
			</div>
		</a>
      	<div class="actions-header">
			<div>
				<a href="https://doc-headshok.com/mon-compte/">
				<img src="https://doc-headshok.com/wp-content/uploads/2025/06/Icon.png" alt="Compte">
				</a>
			</div>
        	<div style="position:relative;">
  				<a href="https://doc-headshok.com/panier/" id="ouvrir-panier" style="position:relative;display:inline-block;">
    				<img src="https://doc-headshok.com/wp-content/uploads/2025/06/Shopping-bag.png" alt="Panier" style="position:relative;">
    				<span id="panier-count" style="position:absolute;top:-7px;right:-7px;background:#FF3F22;color:#fff;border-radius:50%;min-width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700;padding:0 6px;box-shadow:0 1px 4px rgba(0,0,0,0.12);z-index:2;">0</span>
  				</a>
			</div>
        <!-- Drawer vertical à droite -->
		<div id="drawer-overlay" class="drawer-overlay"></div>
			
        <div id="drawer-panier" class="drawer-panier">
            <div class="drawer-header">
				<h2>Votre panier</h2>
                <button id="fermer-drawer" class="fermer-drawer">&times;</button>	
            </div>
			<div class="drawer-content">
				<?php echo do_shortcode('[mini_panier_text_livraison]'); ?>
				<?php echo do_shortcode('[mini_panier_produits]'); ?>
				<?php /*echo do_shortcode('[mini_panier_recommandes]');*/ ?>
					<a href="https://doc-headshok.com/panier/" class="cart-link">Voir le panier</a>
			</div>
        </div>
			<div class="burger-icon" id="burger-down">
				<span class="burger-slice"></span>
				<span class="burger-slice"></span>
				<span class="burger-slice"></span>
			</div>
      	</div>
		
	</div>  
		 
	<div class="header-menu" id="header-menu">
      <div class="conteneur-reduit">
		  <div class="cross" id="burger-close" onclick="document.getElementById('burger-down').classList.remove('hide'); document.getElementById('burger-close').classList.add('hide');document.getElementById('header-menu').style.display = 'none';document.getElementById('flags').style.zIndex = '1'">
			<strong>X</strong>
		</div>
		<div class="search-mobile">
			<?php echo do_shortcode('[wpdreams_ajaxsearchlite]'); ?>
		</div>
		  <div class="menu-navbar">
			<nav>
          		<a href="https://doc-headshok.com/">ACCUEIL</a>
				<div class="dropdown">
  					<a href="https://doc-headshok.com/boutique-produits">BOUTIQUE</a>
  					<span class="arrow-orange" style="margin-left: 4px; width: 12px; height: 12px; flex-shrink: 0;"></span>
  					<ul class="dropdown-content">
						<?php
						// Définir les catégories principales
						$categories_principales = array(
							array('link'=>'vtt','slug' => 'vtt', 'label' => 'PIÈCES DE VÉLO VTT'),
							array('link'=>'vae-2','slug' => 'vae', 'label' => 'PIÈCES DE VÉLO VAE'),
							array('link'=>'route','slug' => 'route', 'label' => 'PIÈCES DE VÉLO ROUTE'),
							array('link'=>'velos-urbains-2','slug' => 'velos-urbains', 'label' => 'PIÈCES DE VÉLO URBAIN'),
							array('link'=>'fourches','slug' => 'fourche', 'label' => 'PIÈCES DE FOURCHES'),
							array('link'=>'pieces-de-cadre','slug' => 'cadre', 'label' => 'PIECES DE CADRE'),
							array('link'=>'transmission','slug' => 'transmission', 'label' => 'TRANSMISSION'),
							array('link'=>'freinage','slug' => 'freinage', 'label' => 'FREINAGE'),
							array('link'=>'roue-pneu','slug' => 'roue', 'label' => 'ROUE / PNEU'),
							array('link'=>'composants','slug' => 'composants', 'label' => 'COMPOSANTS PERIPHERIQUES'),
							array('link'=>'equipement','slug' => 'equipement', 'label' => 'ÉQUIPEMENTS'),
							array('link'=>'marques','slug' => 'marques', 'label' => 'MARQUES')
						);
						
						// Boucle pour chaque catégorie principale
						foreach ($categories_principales as $cat_data) {
							// Récupérer la catégorie parente
							$parent_category = get_term_by('slug', $cat_data['slug'], 'product_cat');
							
							if (!$parent_category) continue;
							
							// Récupérer les sous-catégories
							$subcategories = get_terms(array(
								'taxonomy' => 'product_cat',
								'parent' => $parent_category->term_id,
								'hide_empty' => false,
								'orderby' => 'name',
								'order' => 'ASC'
							));
							?>
							<li class="dropdown-sub">
								<a href="/boutique/<?php echo esc_attr($cat_data['link']); ?>"><?php echo esc_html($cat_data['label']); ?></a>
								<span class="arrow-orange"></span>
								
								<?php if (!empty($subcategories) && !is_wp_error($subcategories)): ?>
								<ul class="dropdown-content-sub">
									<?php foreach ($subcategories as $subcat): ?>
									<li class="dropdown-sub-cat">
										<a href="/boutique/<?php echo esc_attr($cat_data['link']); ?>/?filtre%5B%5D=<?php echo esc_attr($subcat->slug); ?>">
											<?php echo esc_html($subcat->name); ?>
										</a>
									</li>
									<?php endforeach; ?>
								</ul>
								<?php endif; ?>
							</li>
						<?php } ?>
  					</ul>
				</div>
				<div class="dropdown">
  					<a href="https://doc-headshok.com/entretiens-2/">ATELIER</a>
  					<span class="arrow-orange" style="margin-left: 4px; width: 12px; height: 12px; flex-shrink: 0;"></span>
  					<ul class="dropdown-content">
						<li class="dropdown-sub"><a href="/atelier-mecanique/revision-fourches">FOURCHES</a></li>
						<li class="dropdown-sub"><a href="/atelier-mecanique/revision-amortisseur">AMORTISSEUR</a></li>
						<li class="dropdown-sub"><a href="/atelier-mecanique/revision-tige-de-selle">TIGE DE SELLE</a></li>
						<li class="dropdown-sub"><a href="/atelier-mecanique/revision-roue">ROUE</a></li>
						<li class="dropdown-sub"><a href="https://doc-headshok.com/atelier-mecanique/">SERVICE ATELIER</a></li>
						<li class="dropdown-sub"><a href="https://doc-headshok.com/canyon/">CANYON</a></li>
						<li class="dropdown-sub"><a href="https://doc-headshok.com/nos-videos/">NOS VIDÉOS</a></li>
  					</ul>
				</div>
          		<a href="https://doc-headshok.com/contact/">CONTACT</a>
          		<a href="https://doc-headshok.com/faq/">FAQ</a>
          		<a href="https://doc-headshok.com/qui-sommes-nous-2/">QUI SOMMES NOUS ?</a>
          		<a href="https://doc-headshok.com/nos-news/">NOS NEWS</a>
				<a href="https://doc-headshok.com/promotions/" style="color: #FF3F22 !important;">NOS PROMOTIONS</a>
        	</nav>
		</div>
		<div class="translator">
			<?php echo do_shortcode('[gtranslate]'); ?>
		</div>
        <div class="partner">
			<a href="https://doc-headshok.com/magasins-partenaires/" class="btn-prestataire">MAGASINS PARTENAIRES</a>
		</div>
		
      </div>
    </div>
   </div>
	<?php
	return ob_get_clean();
}
add_shortcode('header_personnalise', 'header_personnalise_shortcode');